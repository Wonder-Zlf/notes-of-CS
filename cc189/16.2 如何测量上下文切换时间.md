# 16.2 如何测量上下文切换时间

## 解答：

上下文切换（context switch）是两个进程之间切换（也即，将等待中的进程转为执行状态，而将正在执行的进程转为等待或终止状态）所耗费的时间。这样的动作会发生在多任务处理系统中，操作系统必须将等待中进程的状态信息载入内存，并保存执行中进程的状态信息。

为了解决这个问题，我们需要记录两个交换进程执行最后一条和第一条指令的时间戳，而上下文切换时间就是这两个进程的时间戳差值。



举个例子：

假设当前操作系统只允许一个进程占用CPU，进程P1要向P2发送一条消息。P1发送消息后即会被操作系统阻塞，这是时间T1。然后P2从等待中进入运行态，这是时间T2。

T1-T2，就是P1的context被载入内存的时间，也即所谓的上下文切换时间。

但是要注意，操作系统中允许多个进程存在，所以不是一定会发生上述的上下文切换。更有可能是某些进行设定要被阻塞，然后发生context switch。





## Context上下文

操作系统中进程所处的环境，也就是上面答案中的“状态信息”。

不是springboot独有的，这是进程的一个概念啊！

